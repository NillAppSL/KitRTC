{"version":3,"file":"KitRtcJs.mjs","sources":["../../../projects/mediakitappjs/src/lib/components/icon/icon.component.ts","../../../projects/mediakitappjs/src/lib/components/icon/icon.component.html","../../../projects/mediakitappjs/src/lib/interfaces/tracks.ts","../../../projects/mediakitappjs/src/lib/interfaces/logger.ts","../../../projects/mediakitappjs/src/lib/class/logger.ts","../../../projects/mediakitappjs/src/lib/class/localtracks.ts","../../../projects/mediakitappjs/src/lib/class/tracks.ts","../../../projects/mediakitappjs/src/lib/class/participant.ts","../../../projects/mediakitappjs/src/lib/interfaces/room.ts","../../../projects/mediakitappjs/src/lib/class/room.ts","../../../projects/mediakitappjs/src/lib/services/kitrtc.service.ts","../../../projects/mediakitappjs/src/lib/components/tracks/tracks.component.ts","../../../projects/mediakitappjs/src/lib/components/tracks/tracks.component.html","../../../projects/mediakitappjs/src/lib/components/participants/participant/participant.component.ts","../../../projects/mediakitappjs/src/lib/components/participants/participant/participant.component.html","../../../projects/mediakitappjs/src/lib/components/participants/participants.component.ts","../../../projects/mediakitappjs/src/lib/components/participants/participants.component.html","../../../projects/mediakitappjs/src/lib/components/participants/local-participant/local-participant.component.ts","../../../projects/mediakitappjs/src/lib/components/participants/local-participant/local-participant.component.html","../../../projects/mediakitappjs/src/lib/components/media-controls/media-controls.component.ts","../../../projects/mediakitappjs/src/lib/components/media-controls/media-controls.component.html","../../../projects/mediakitappjs/src/lib/kitrtc.module.ts","../../../projects/mediakitappjs/src/public-api.ts","../../../projects/mediakitappjs/src/KitRtcJs.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\n\nexport enum IconType {\n  muted = \"muted\",\n  maximized = \"maximized\",\n  logo = \"logo\",\n  CAMERA = \"CAMERA\",\n  CAMERA_OFF = \"CAMERA_OFF\",\n  MICROPHONE = \"MICROPHONE\",\n  MICROPHONE_OFF = \"MICROPHONE_OFF\",\n  LOGOUT = \"LOGOUT\",\n}\n\n@Component({\n  selector: 'kitrtc-icon',\n  templateUrl: './icon.component.html',\n  styleUrls: ['./icon.component.css']\n})\nexport class IconComponent {\n  @Input() icon: IconType = IconType.muted;\n  @Input() size: string = \"24px\";\n  @Input() color: string = \"#ffffff\";\n\n  iconType = IconType;\n\n  constructor() { }\n}\n","<ng-container *ngIf=\"icon === iconType.muted\">\n  <svg width=\"32px\" height=\"32px\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clip-path=\"url(#clip0_15_183)\">\n      <path d=\"M3 16V8H6L11 4V20L6 16H3Z\" stroke=\"#FFFFFF\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n      <path d=\"M14.5 15L20.5 9\" stroke=\"#FFFFFF\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n      <path d=\"M14.5 9L20.5 15\" stroke=\"#FFFFFF\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_15_183\">\n        <rect width=\"24\" height=\"24\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n</ng-container>\n\n<ng-container *ngIf=\"icon === iconType.maximized\">\n  <svg fill=\"#FFFFFF\" width=\"24px\" height=\"24px\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M12 28.75h-8.75v-8.75c0-0.69-0.56-1.25-1.25-1.25s-1.25 0.56-1.25 1.25v0 10c0 0.69 0.56 1.25 1.25 1.25h10c0.69 0 1.25-0.56 1.25-1.25s-0.56-1.25-1.25-1.25v0zM30 18.75c-0.69 0.001-1.249 0.56-1.25 1.25v8.75h-8.75c-0.69 0-1.25 0.56-1.25 1.25s0.56 1.25 1.25 1.25v0h10c0.69-0.001 1.249-0.56 1.25-1.25v-10c-0.001-0.69-0.56-1.249-1.25-1.25h-0zM12 0.75h-10c-0.69 0-1.25 0.56-1.25 1.25v0 10c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0-8.75h8.75c0.69 0 1.25-0.56 1.25-1.25s-0.56-1.25-1.25-1.25v0zM30 0.75h-10c-0.69 0-1.25 0.56-1.25 1.25s0.56 1.25 1.25 1.25v0h8.75v8.75c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0-10c-0-0.69-0.56-1.25-1.25-1.25h-0z\">\n    </path>\n  </svg>\n</ng-container>\n\n\n\n<ng-container *ngIf=\"icon === iconType.CAMERA\">\n  <svg [attr.fill]=\"color\" width=\"100%\" height=\"100%\" viewBox=\"0 0 1920 1920\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0 240v1440h1500.536v-438.89L1920 1574.062V346.051L1500.536 678.89V240H0Zm109.779 109.779h1280.979v556.348l177.995-141.29 241.468-191.66v773.646l-241.468-191.549-177.995-141.29v556.236H109.778V349.78Z\" fill-rule=\"evenodd\"/>\n  </svg>\n</ng-container>\n\n<ng-container *ngIf=\"icon === iconType.CAMERA_OFF\">\n  <svg [attr.fill]=\"color\" width=\"100%\" height=\"100%\" viewBox=\"0 0 1920 1920\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"m1421.141 2.417 91.775 64.262L215.481 1918.962l.595.416-.378.54-92.37-64.678L246.074 1680H0V240h1254.726L1421.141 2.416Zm79.395 278.487V678.89L1920 346.052v1228.01l-419.464-332.951V1680H520.538l76.895-109.78 793.325.001v-556.235l177.995 141.29 241.468 191.548V573.176l-241.468 191.662-177.995 141.29-.001-468.498 109.779-156.726Zm-322.705 68.874H109.779v1220.443h213.19l854.862-1220.443Z\" fill-rule=\"evenodd\"/>\n  </svg>\n</ng-container>\n\n\n<ng-container *ngIf=\"icon === iconType.MICROPHONE\">\n  <svg width=\"100%\" height=\"100%\" viewBox=\"-0.5 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path [attr.stroke]=\"color\" d=\"M7 7.40991C7 6.08383 7.52677 4.81207 8.46445 3.87439C9.40213 2.93671 10.6739 2.40991 12 2.40991C13.3261 2.40991 14.5978 2.93671 15.5355 3.87439C16.4732 4.81207 17 6.08383 17 7.40991V13.4099C17 14.736 16.4732 16.0079 15.5355 16.9456C14.5978 17.8832 13.3261 18.4099 12 18.4099C10.6739 18.4099 9.40213 17.8832 8.46445 16.9456C7.52677 16.0079 7 14.736 7 13.4099V7.40991Z\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path [attr.stroke]=\"color\" d=\"M21 13.4099C21 15.7969 20.0518 18.0861 18.364 19.7739C16.6761 21.4618 14.3869 22.4099 12 22.4099C9.61305 22.4099 7.32384 21.4618 5.63602 19.7739C3.94819 18.0861 3 15.7969 3 13.4099\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n</ng-container>\n\n<ng-container *ngIf=\"icon === iconType.MICROPHONE_OFF\">\n  <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path [attr.stroke]=\"color\" d=\"M17.0005 11.24V13C17.0005 14.3261 16.4737 15.5978 15.536 16.5355C14.5983 17.4732 13.3266 18 12.0005 18C11.4846 17.9975 10.972 17.9166 10.4805 17.76\"  stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path [attr.stroke]=\"color\" d=\"M8 16C7.35089 15.1345 7 14.0819 7 13V7C7 5.67392 7.52677 4.40216 8.46445 3.46448C9.40213 2.5268 10.6739 2 12 2C13.3261 2 14.5978 2.5268 15.5355 3.46448C16.4732 4.40216 17 5.67392 17 7\"  stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path [attr.stroke]=\"color\" d=\"M5.21081 18.84C3.81268 17.216 3.04593 15.1429 3.0508 13\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path [attr.stroke]=\"color\" d=\"M21.0007 13C20.9995 14.5822 20.5812 16.1361 19.788 17.5051C18.9948 18.8741 17.8547 20.0098 16.4827 20.7977C15.1107 21.5857 13.5551 21.9979 11.973 21.993C10.3908 21.9882 8.83786 21.5664 7.4707 20.77\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path [attr.stroke]=\"color\" d=\"M22 2L2 22\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n</ng-container>\n\n\n\n<ng-container *ngIf=\"icon === iconType.LOGOUT\">\n  <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M15 12L6 12M6 12L8 14M6 12L8 10\" [attr.stroke]=\"color\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M12 21.9827C10.4465 21.9359 9.51995 21.7626 8.87865 21.1213C8.11027 20.3529 8.01382 19.175 8.00171 17M16 21.9983C18.175 21.9862 19.3529 21.8897 20.1213 21.1213C21 20.2426 21 18.8284 21 16V14V10V8C21 5.17157 21 3.75736 20.1213 2.87868C19.2426 2 17.8284 2 15 2H14C11.1715 2 9.75733 2 8.87865 2.87868C8.11027 3.64706 8.01382 4.82497 8.00171 7\" [attr.stroke]=\"color\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n    <path d=\"M3 9.5V14.5C3 16.857 3 18.0355 3.73223 18.7678C4.46447 19.5 5.64298 19.5 8 19.5M3.73223 5.23223C4.46447 4.5 5.64298 4.5 8 4.5\" [attr.stroke]=\"color\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n  </svg>\n</ng-container>\n\n\n<ng-container *ngIf=\"icon === iconType.logo\">\n  <svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\"\n    y=\"0px\" width=\"100%\" height=\"100%\" viewBox=\"0 0 2818 1388\" enable-background=\"new 0 0 2818 1388\"\n    xml:space=\"preserve\">\n    <path fill=\"#FDFDFD\" opacity=\"1.000000\" stroke=\"none\" d=\"\nM1352.983398,753.003418\n\tC1342.993042,753.003418 1333.500122,753.003418 1323.623291,753.003418\n\tC1323.518555,751.563477 1323.345337,750.296509 1323.345825,749.029541\n\tC1323.370239,681.393311 1323.392334,613.757080 1323.459351,546.120850\n\tC1323.475342,529.914612 1331.518677,521.974915 1347.753540,521.972107\n\tC1399.417114,521.963257 1451.080933,521.921631 1502.744385,521.990417\n\tC1526.723755,522.022278 1544.305420,534.056763 1551.272705,555.269775\n\tC1552.759155,559.795593 1553.984863,564.658142 1553.999756,569.369812\n\tC1554.047729,584.503235 1554.849609,599.821533 1552.867798,614.737305\n\tC1547.869751,652.355591 1517.885132,671.197510 1491.126343,675.980103\n\tC1487.061646,676.706543 1482.932129,677.070801 1477.521973,677.772583\n\tC1506.809814,703.078003 1535.309326,727.702209 1564.591553,753.002808\n\tC1542.875977,753.002808 1522.266235,753.052246 1501.658081,752.904907\n\tC1500.081055,752.893677 1498.255859,751.790894 1496.980225,750.691711\n\tC1469.855103,727.320618 1442.839478,703.822144 1415.626221,680.554688\n\tC1413.495728,678.733215 1410.105591,677.691162 1407.240479,677.554565\n\tC1398.973022,677.160645 1390.674927,677.415405 1382.194946,677.415405\n\tC1382.194946,663.345276 1382.194946,649.588135 1382.194946,635.455017\n\tC1394.161499,635.455017 1405.943604,635.446655 1417.725708,635.456909\n\tC1436.495972,635.473206 1455.266357,635.517944 1474.036621,635.517517\n\tC1482.000122,635.517334 1489.536865,633.735352 1496.409424,629.629944\n\tC1505.941895,623.935913 1511.441528,615.480103 1512.031982,604.422119\n\tC1512.582275,594.117432 1512.530640,583.766602 1512.365234,573.442200\n\tC1512.239380,565.598572 1510.260498,563.902222 1502.378540,563.898376\n\tC1474.048584,563.884644 1445.718750,563.923157 1417.388794,563.941345\n\tC1401.391357,563.951599 1385.393921,563.956360 1369.396484,563.978455\n\tC1368.084351,563.980286 1366.772461,564.097229 1365.199463,564.173279\n\tC1365.199463,627.153015 1365.199463,689.930298 1365.199463,753.003418\n\tC1361.114136,753.003418 1357.297363,753.003418 1352.983398,753.003418\nz\" />\n    <path fill=\"#FEFEFE\" opacity=\"1.000000\" stroke=\"none\" d=\"\nM1836.672363,717.265076\n\tC1835.250854,709.753479 1832.974854,702.602417 1832.918335,695.433899\n\tC1832.607544,655.955505 1832.255371,616.460815 1833.069458,576.995422\n\tC1833.721802,545.375977 1858.479004,522.109802 1890.000488,522.026123\n\tC1939.497925,521.894714 1988.995972,521.976685 2038.493774,521.978149\n\tC2039.780273,521.978149 2041.066772,522.091492 2042.544922,522.160950\n\tC2042.544922,536.062500 2042.544922,549.665100 2042.544922,563.968628\n\tC2040.770508,563.968628 2039.020264,563.969543 2037.269897,563.968506\n\tC1989.950195,563.939880 1942.630371,563.909180 1895.310669,563.887756\n\tC1892.978638,563.886658 1890.634766,563.829529 1888.316895,564.033325\n\tC1880.788208,564.695190 1875.792114,569.547241 1874.883911,577.077515\n\tC1874.585449,579.551758 1874.437744,582.059326 1874.435791,584.551880\n\tC1874.407837,620.050293 1874.415283,655.548767 1874.422974,691.047180\n\tC1874.423218,692.376831 1874.452271,693.711792 1874.569946,695.035217\n\tC1875.554565,706.117493 1880.846069,711.052551 1892.071411,711.061523\n\tC1925.725586,711.088379 1959.379639,711.033203 1993.033813,711.013184\n\tC2007.866211,711.004333 2022.698608,711.002869 2037.531006,710.998230\n\tC2039.143433,710.997742 2040.755859,710.998169 2042.557129,710.998169\n\tC2042.557129,725.113831 2042.557129,738.714417 2042.557129,752.704468\n\tC2041.075562,752.806030 2039.647949,752.989075 2038.220337,752.989502\n\tC1989.889160,753.004333 1941.557739,753.047913 1893.226685,752.983398\n\tC1866.860718,752.948181 1845.677002,739.569580 1836.672363,717.265076\nz\" />\n    <path fill=\"#FEFEFE\" opacity=\"1.000000\" stroke=\"none\" d=\"\nM1712.891846,649.000000\n\tC1712.891113,683.803040 1712.891113,718.106018 1712.891113,752.704834\n\tC1698.876221,752.704834 1685.136841,752.704834 1670.950439,752.704834\n\tC1670.950439,690.009705 1670.950439,627.284485 1670.950439,564.167603\n\tC1639.923828,564.167603 1609.336914,564.167603 1578.420898,564.167603\n\tC1578.420898,550.049744 1578.420898,536.318909 1578.420898,522.278381\n\tC1653.732544,522.278381 1729.123535,522.278381 1804.769043,522.278381\n\tC1804.769043,536.018250 1804.769043,549.759338 1804.769043,563.863037\n\tC1774.296387,563.863037 1743.878662,563.863037 1712.892578,563.863037\n\tC1712.892578,592.313782 1712.892578,620.406860 1712.891846,649.000000\nz\" />\n    <path fill=\"#FEFDFE\" opacity=\"1.000000\" stroke=\"none\" d=\"\nM1162.983643,578.840393\n\tC1167.269897,578.853027 1171.059570,578.853027 1175.206299,578.853027\n\tC1175.206299,559.746521 1175.206299,541.153503 1175.206299,522.266968\n\tC1189.495361,522.266968 1203.416992,522.266968 1217.813110,522.266968\n\tC1217.813110,540.815796 1217.813110,559.546814 1217.813110,578.691528\n\tC1242.346558,578.691528 1266.412720,578.691528 1290.739502,578.691528\n\tC1290.739502,592.855591 1290.739502,606.604431 1290.739502,620.762268\n\tC1266.654541,620.762268 1242.586670,620.762268 1218.158691,620.762268\n\tC1218.158691,664.916687 1218.158691,708.666565 1218.158691,752.708984\n\tC1203.757935,752.708984 1189.718628,752.708984 1175.276733,752.708984\n\tC1175.276733,708.790649 1175.276733,665.059509 1175.276733,620.993042\n\tC1157.118652,620.993042 1139.356934,620.993042 1121.297729,620.993042\n\tC1121.297729,606.922119 1121.297729,593.183655 1121.297729,578.827759\n\tC1134.986572,578.827759 1148.736816,578.827759 1162.983643,578.840393\nz\" />\n    <path fill=\"#FDFDFD\" opacity=\"1.000000\" stroke=\"none\" d=\"\nM993.000000,753.004028\n\tC984.512207,752.910095 975.650757,754.940186 968.785889,752.116333\n\tC962.107544,749.369202 957.474915,741.649292 951.943542,736.113464\n\tC927.452026,711.601990 902.905090,687.145386 878.542786,662.506165\n\tC875.687500,659.618469 872.889465,658.492371 868.933655,658.628601\n\tC861.146179,658.896667 853.342957,658.707520 845.272461,658.707520\n\tC845.272461,644.547485 845.272461,630.629944 845.272461,616.222534\n\tC853.163818,616.222534 861.101685,616.015381 869.020935,616.309753\n\tC872.992737,616.457458 875.761658,615.256531 878.577026,612.416077\n\tC907.430420,583.304871 936.460083,554.368408 965.329163,525.272705\n\tC967.764709,522.818054 970.146484,521.856689 973.571960,521.887695\n\tC991.520752,522.050659 1009.471802,521.963928 1028.419434,521.963928\n\tC988.429810,560.826660 949.100525,599.047791 909.630737,637.405457\n\tC949.138428,675.819458 988.417542,714.011230 1028.520508,753.004028\n\tC1016.241211,753.004028 1004.870605,753.004028 993.000000,753.004028\nz\" />\n    <path fill=\"#FDFDFD\" opacity=\"1.000000\" stroke=\"none\" d=\"\nM828.221252,689.000732\n\tC828.221252,710.471741 828.221252,731.442627 828.221252,752.708069\n\tC814.273682,752.708069 800.551453,752.708069 786.508423,752.708069\n\tC786.508423,676.015808 786.508423,599.254456 786.508423,522.230713\n\tC800.316956,522.230713 814.067932,522.230713 828.221252,522.230713\n\tC828.221252,577.658752 828.221252,633.079773 828.221252,689.000732\nz\" />\n    <path fill=\"#FDFDFD\" opacity=\"1.000000\" stroke=\"none\" d=\"\nM1050.808594,741.259644\n\tC1050.800659,687.103271 1050.800659,633.197327 1050.800659,579.075195\n\tC1064.851562,579.075195 1078.592041,579.075195 1092.576416,579.075195\n\tC1092.576416,636.956787 1092.576416,694.654175 1092.576416,752.677612\n\tC1078.794434,752.677612 1065.050903,752.677612 1050.816528,752.677612\n\tC1050.816528,749.084717 1050.816528,745.297424 1050.808594,741.259644\nz\" />\n    <path fill=\"#FDFDFD\" opacity=\"1.000000\" stroke=\"none\" d=\"\nM1057.138672,543.008545\n\tC1054.851562,543.010559 1053.041016,543.010559 1051.008667,543.010559\n\tC1051.008667,530.332275 1051.008667,517.885925 1051.008667,505.217773\n\tC1064.752930,505.217773 1078.507080,505.217773 1092.537842,505.217773\n\tC1092.537842,517.709045 1092.537842,530.099915 1092.537842,543.006592\n\tC1080.821777,543.006592 1069.218628,543.006592 1057.138672,543.008545\nz\" />\n  </svg>\n</ng-container>\n","import { TracksEvents } from \"../class/tracks\";\r\n\r\n/**\r\n * Track kind enum\r\n * @description The kind of track\r\n */\r\nexport enum TrackKind {\r\n  AUDIO = 'audio',\r\n  VIDEO = 'video'\r\n}\r\n\r\n/**\r\n * Track interface\r\n * @description The track interface\r\n */\r\nexport interface Track {\r\n  /**\r\n   * Track kind\r\n   * @description Track kind\r\n   */\r\n  kind: TrackKind;\r\n  /**\r\n   * Track id\r\n   * @description Track id\r\n   */\r\n  id: string;\r\n  /**\r\n   * Track id\r\n   * @description Track id\r\n   */\r\n  trackId: string;\r\n  /**\r\n   * Track label\r\n   * @description Track label\r\n   */\r\n  label: string;\r\n  /**\r\n   * Track stream\r\n   * @description MediaStream\r\n   */\r\n  stream: MediaStream;\r\n  /**\r\n   * Track\r\n   * @description MediaStreamTrack\r\n   */\r\n  track: MediaStreamTrack;\r\n  /**\r\n   * Participant id\r\n   * @description Participant id\r\n   */\r\n  participantId: string;\r\n  /**\r\n   * Get auto source\r\n   * @description Get auto source from <kitrtc-track />\r\n   */\r\n  getAutoSource?: HTMLVideoElement | HTMLAudioElement | undefined;\r\n  /**\r\n   * Track component\r\n   * @description Track component\r\n   */\r\n  trackComponent?: any;\r\n  /**\r\n   * Track events\r\n   * @description Track events\r\n   */\r\n  trackEvents?: TracksEvents,\r\n  /**\r\n   * Get source\r\n   * @description Generate source from track\r\n   */\r\n  getSource: () => HTMLVideoElement | HTMLAudioElement | undefined;\r\n}\r\n\r\n\r\n/**\r\n * Media options interface\r\n * @description The media options interface\r\n */\r\nexport interface MediaOptions {\r\n  video?: {\r\n    maxBitrate?: number;\r\n  }\r\n  audio?: {\r\n    maxBitrate?: number;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Tracks events interface\r\n * @description The tracks events interface\r\n */\r\nexport interface TracksEventsConstructorOptions {\r\n  MediaStream: MediaStream;\r\n  RTCTrackEvent?: RTCTrackEvent;\r\n}\r\n","\r\n\r\n/**\r\n * Logger interface\r\n * @description Color of log\r\n */\r\nexport enum LoggerColors {\r\n  RED = 'red',\r\n  GREEN = 'green',\r\n  YELLOW = 'yellow',\r\n  BLUE = 'blue'\r\n}\r\n","import { LoggerColors } from \"../interfaces/logger\";\r\n\r\n/**\r\n * Logger\r\n * @description Logger for debug mode\r\n */\r\nexport class Logger {\r\n\r\n  /**\r\n   * Show log in console\r\n   * @param color color of log\r\n   * @param message message to show\r\n   */\r\n  log(color: LoggerColors, message: {} | string): void {\r\n    const title = 'KitRTC Logging:';\r\n    let colorString = '';\r\n\r\n    switch (color) {\r\n      case LoggerColors.RED:\r\n        colorString = 'color: red';\r\n        break;\r\n      case LoggerColors.GREEN:\r\n        colorString = 'color: green';\r\n        break;\r\n      case LoggerColors.YELLOW:\r\n        colorString = 'color: yellow';\r\n        break;\r\n      case LoggerColors.BLUE:\r\n        colorString = 'color: blue';\r\n        break;\r\n      default:\r\n        colorString = 'color: blue';\r\n        break;\r\n    }\r\n\r\n    console.log(`%c${title}`, colorString, message);\r\n  }\r\n\r\n}\r\n","import { Track, TrackKind } from \"../interfaces/tracks\";\r\nimport { KitRtc } from \"../services/kitrtc.service\";\r\nimport { Participant } from \"./participant\";\r\nimport { TracksEvents } from \"./tracks\";\r\nimport { LoggerColors } from \"../interfaces/logger\";\r\nimport { Logger } from \"./logger\";\r\n\r\n\r\n/**\r\n * Local tracks\r\n * @description Local tracks for participant\r\n */\r\nexport class LocalTracks extends Logger{\r\n\r\n  /**\r\n   * Random id for track\r\n   * @description Random id for track\r\n   */\r\n  id: string = this.randomId();\r\n\r\n  /**\r\n   * Participant for track\r\n   * @description Participant owner of track\r\n   */\r\n  participant: Participant;\r\n\r\n\r\n  constructor(\r\n    private kitRtc: KitRtc,\r\n    participant: Participant\r\n    ) {\r\n    super();\r\n    this.participant = participant;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Create local tracks\r\n   * @description Create local tracks\r\n   * @param constraints MediaStreamConstraints for getUserMedia\r\n   * @returns Promise with MediaStream or undefined\r\n   */\r\n  async createLocalTracks(constraints?: MediaStreamConstraints): Promise<MediaStream | undefined>{\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({audio: true, video: true});\r\n\r\n      for (const track of stream.getTracks()) {\r\n        this.participant.createTrack(stream, track);\r\n      }\r\n\r\n      this.log(LoggerColors.GREEN, { message: \"Local tracks created\", tracks: this.participant.tracks });\r\n\r\n      return stream;\r\n    } catch (error) {\r\n      this.log(LoggerColors.RED, { message: \"Error creating local tracks\", error: error });\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Enable camera and mic\r\n   * @description Enable local camera and mic\r\n   */\r\n  async enableCameraAndMic(): Promise<boolean> {\r\n    try {\r\n      //find track in tracks with filter\r\n      const trackSource = this.participant.tracks.find(track => track.stream.getTracks().find(track => track.kind === TrackKind.VIDEO));\r\n      if (trackSource) {\r\n        trackSource.stream.getTracks().forEach((track) => {\r\n          if (track.kind === TrackKind.VIDEO || track.kind === TrackKind.AUDIO) {\r\n            track.enabled = true;\r\n            this.kitRtc.onUnMuted.next([this.participant, trackSource]);\r\n          }\r\n        });\r\n        return true;\r\n      }\r\n\r\n      //create track\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\r\n\r\n      for (const track of stream.getTracks()) {\r\n        this.participant.createTrack(stream, track);\r\n      }\r\n\r\n      await this.publish();\r\n      return true;\r\n    } catch (error) {\r\n      this.log(LoggerColors.RED, { message: \"Error enabling camera and mic\", error: error });\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Enable camera\r\n   * @description Enable local camera\r\n   */\r\n  async enableCamera(): Promise<void> {\r\n    //find track in tracks with filter\r\n    const trackSource = this.participant.tracks.find(track => track.stream.getTracks().find(track => track.kind === TrackKind.VIDEO));\r\n    if (trackSource) {\r\n      trackSource.stream.getTracks().forEach((track) => {\r\n        if (track.kind === TrackKind.VIDEO) {\r\n          track.enabled = true;\r\n          this.kitRtc.onUnMuted.next([this.participant, trackSource]);\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    //create track\r\n    const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n\r\n    for (const track of stream.getTracks()) {\r\n      this.participant.createTrack(stream, track);\r\n    }\r\n\r\n    await this.publish();\r\n  }\r\n\r\n\r\n  /**\r\n   * Disable camera\r\n   * @description Disable local camera\r\n   */\r\n  async disableCamera(): Promise<void> {\r\n    //find track in tracks with filter\r\n    const trackSource = this.participant.tracks.find(track => track.stream.getTracks().find(track => track.kind === TrackKind.VIDEO));\r\n    if (trackSource) {\r\n      trackSource.stream.getTracks().forEach((track) => {\r\n        if (track.kind === TrackKind.VIDEO) {\r\n          track.enabled = false;\r\n          this.kitRtc.onMuted.next([this.participant, trackSource]);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Toogle camera\r\n   * @description Toogle local camera\r\n   */\r\n  async toogleCamera(): Promise<boolean> {\r\n    try {\r\n\r\n      const trackSource = this.participant.tracks.find(track => track.kind === TrackKind.VIDEO);\r\n      if (trackSource) {\r\n\r\n        trackSource.stream.getVideoTracks().forEach((track) => {\r\n          if (track.kind === TrackKind.VIDEO) {\r\n            track.enabled = !track.enabled;\r\n            if(track.enabled){\r\n              this.kitRtc.onUnMuted.next([this.participant, trackSource]);\r\n            } else {\r\n              this.kitRtc.onMuted.next([this.participant, trackSource]);\r\n            }\r\n          }\r\n        });\r\n\r\n        return true;\r\n      }\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      for (const track of stream.getTracks()) {\r\n        this.participant.createTrack(stream, track);\r\n      }\r\n\r\n      await this.publish();\r\n      return true;\r\n    } catch (error) {\r\n      this.log(LoggerColors.RED, { message: \"Error toogle camera\", error: error });\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Enable mic\r\n   * @description Enable local mic\r\n   */\r\n  async enableMic(): Promise<void> {\r\n    try {\r\n      const trackSource = this.participant.tracks.find(track => track.stream.getTracks().find(track => track.kind === TrackKind.AUDIO));\r\n\r\n      if (trackSource) {\r\n        trackSource.stream.getTracks().forEach((track) => {\r\n          if (track.kind === TrackKind.AUDIO) {\r\n            track.enabled = true;\r\n            this.kitRtc.onUnMuted.next([this.participant, trackSource]);\r\n          }\r\n        });\r\n        return;\r\n      }\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n\r\n      for (const track of stream.getTracks()) {\r\n        this.participant.createTrack(stream, track);\r\n      }\r\n      await this.publish();\r\n    } catch (error) {\r\n      this.log(LoggerColors.RED, { message: \"Error enabling mic\", error: error });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Disable mic\r\n   * @description Disable local mic\r\n   */\r\n  async disableMic(): Promise<void> {\r\n    try {\r\n      //find track in tracks with filter\r\n      const trackSource = this.participant.tracks.find(track => track.stream.getTracks().find(track => track.kind === TrackKind.AUDIO));\r\n      if (trackSource) {\r\n        trackSource.stream.getTracks().forEach((track) => {\r\n          if (track.kind === TrackKind.AUDIO) {\r\n            track.enabled = false;\r\n            this.kitRtc.onMuted.next([this.participant, trackSource]);\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      this.log(LoggerColors.RED, { message: \"Error disabling mic\", error: error });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Toogle mic\r\n   * @description Toogle local mic\r\n   */\r\n  async toogleMic(): Promise<void> {\r\n    try {\r\n\r\n      const trackSource = this.participant.tracks.find(track => track.kind === TrackKind.AUDIO);\r\n      if (trackSource) {\r\n\r\n        trackSource.stream.getAudioTracks().forEach((track) => {\r\n          if (track.kind === TrackKind.AUDIO) {\r\n            track.enabled = !track.enabled;\r\n            if(track.enabled){\r\n              this.kitRtc.onUnMuted.next([this.participant, trackSource]);\r\n            } else {\r\n              this.kitRtc.onMuted.next([this.participant, trackSource]);\r\n            }\r\n          }\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      for (const track of stream.getTracks()) {\r\n        this.participant.createTrack(stream, track);\r\n      }\r\n\r\n      await this.publish();\r\n    } catch (error) {\r\n      this.log(LoggerColors.RED, { message: \"Error toogle mic\", error: error });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Publish tracks\r\n   * @description Publish tracks to all participants (Only local participant)\r\n   */\r\n  async publish(): Promise<void>{\r\n    if(!this.participant.local){\r\n      return;\r\n    }\r\n\r\n    try {\r\n      for (const participant of this.kitRtc.participants) {\r\n        const senders = participant.rtcPeerConnection?.getSenders()\r\n\r\n        for (const track of this.participant.tracks) {\r\n          const mediaTrack = track;\r\n          if(senders){\r\n\r\n            const sender = senders.find((sender) => {\r\n              return sender.track?.id === mediaTrack.id;\r\n            });\r\n\r\n            if(sender){\r\n              this.log(LoggerColors.YELLOW, { message: \"Track is already published\", track: track });\r\n              continue;\r\n            }\r\n          }\r\n\r\n          participant.rtcPeerConnection?.addTrack(mediaTrack.track, track.stream);\r\n        }\r\n\r\n        participant.createOffer();\r\n      }\r\n    } catch (error) {\r\n      this.log(LoggerColors.RED, { message: \"Error publishing tracks\", error: error });\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Unpublish tracks (Only local participant)\r\n   * @description Unpublish tracks to all participants\r\n   * @param removeLocalTracks remove local tracks\r\n   * @returns\r\n   */\r\n  async unpublish(removeLocalTracks: boolean = true): Promise<void>{\r\n    if(!this.participant.local){\r\n      return;\r\n    }\r\n\r\n\r\n    //remove track from connection\r\n    for (const track of this.participant.tracks) {\r\n        const mediaTrack = track;\r\n        for (const participant of this.kitRtc.participants) {\r\n          const sender = participant.rtcPeerConnection?.getSenders().find(sender => sender.track === mediaTrack.track);\r\n          if (sender) {\r\n            participant.rtcPeerConnection?.removeTrack(sender);\r\n          }\r\n        }\r\n    }\r\n\r\n\r\n    //stop tracks\r\n    if (removeLocalTracks) this.stopLocalTracks();\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Stop local tracks\r\n   * @description Stop local tracks (Only local participant)\r\n   */\r\n  stopLocalTracks(): void{\r\n\r\n    if(!this.participant.local){\r\n      return;\r\n    }\r\n\r\n    this.unpublish(false);\r\n\r\n    for (const track of this.participant.tracks) {\r\n        const mediaTrack = track;\r\n        mediaTrack.track.stop();\r\n        this.kitRtc.onRemoveLocalMedia.next([this.participant, mediaTrack]);\r\n    }\r\n\r\n\r\n    this.participant.tracks = [];\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Toggle track\r\n   * @param type track type\r\n   */\r\n  toggleTrack(type: TrackKind) {\r\n    if(!this.participant.local){\r\n      return;\r\n    }\r\n\r\n    //find track\r\n    const trackSource = this.participant.tracks.find(track => track.kind === type);\r\n\r\n    if(!trackSource){\r\n      return;\r\n    }\r\n\r\n    trackSource.stream.getTracks().forEach((track) => {\r\n        if (track.kind === type) {\r\n          track.enabled = !track.enabled;\r\n          if(track.enabled){\r\n            this.kitRtc.onUnMuted.next([this.participant, trackSource]);\r\n          } else {\r\n            this.kitRtc.onMuted.next([this.participant, trackSource]);\r\n          }\r\n        }\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Add track to connection\r\n   * @param rtcPeerConnection\r\n   * @returns\r\n   */\r\n  addTrackToConnection(participant: Participant): void{\r\n    if(!this.participant.local){\r\n      return;\r\n    }\r\n    if(this.participant.tracks.length === 0) return;\r\n    try {\r\n      for (const track of this.participant.tracks) {\r\n        //for (const mediaTrack of track.tracks) {\r\n          const mediaTrack = track;\r\n          participant.rtcPeerConnection?.addTrack(mediaTrack.track, track.stream);\r\n        //}\r\n      }\r\n      console.log(\"Add track to connection\", this.participant.tracks);\r\n      participant.createOffer();\r\n    } catch (error) {\r\n      console.log(\"Add track to connection error:\", error);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Get tracks\r\n   * @description Get tracks of participant (Only local participant)\r\n   * @returns Track[]\r\n   */\r\n  get getTracks(): Track[]{\r\n    return this.participant.tracks;\r\n  }\r\n\r\n\r\n  /**\r\n   * Get source\r\n   * @description Get element source for track\r\n   * @param track Track\r\n   * @returns HTMLVideoElement | HTMLAudioElement | undefined\r\n   */\r\n  getSource(track: Track): HTMLVideoElement | HTMLAudioElement | undefined{\r\n    switch(track?.kind){\r\n      case TrackKind.AUDIO:\r\n        const audio = document.createElement(\"audio\");\r\n        audio.srcObject = track.stream;\r\n        audio.autoplay = true;\r\n        audio.controls = true;\r\n        audio.muted = false;\r\n        return audio;\r\n      case TrackKind.VIDEO:\r\n        const video = document.createElement(\"video\");\r\n        video.srcObject = track.stream;\r\n        video.autoplay = true;\r\n        video.controls = true;\r\n        video.muted = false;\r\n        video.playsInline = true;\r\n        return video;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Random id\r\n   * @description Random id\r\n   * @returns string\r\n   */\r\n  private randomId(): string{\r\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Handle track ended\r\n   * @param track Track\r\n   */\r\n  private handleTrackEnded(track: Track): void{\r\n    console.log('handleTrackEnded', track);\r\n    this.kitRtc.onRemoveRemoteMedia.next([this.participant, track]);\r\n  }\r\n\r\n}\r\n","import { LoggerColors } from \"../interfaces/logger\";\r\nimport { Track, TrackKind, TracksEventsConstructorOptions } from \"../interfaces/tracks\";\r\nimport { Logger } from \"./logger\";\r\nimport { Participant } from \"./participant\";\r\n\r\n\r\n/**\r\n * TracksEvents\r\n * @description Tracks events control\r\n */\r\nexport class TracksEvents {\r\n\r\n  /**\r\n   * Id\r\n   * @description Id for track event\r\n   */\r\n  id: string = this.randomId();\r\n\r\n  /**\r\n   * Participant\r\n   * @description Participant\r\n   */\r\n  participant: Participant;\r\n\r\n  /**\r\n   * Stream\r\n   * @description Stream\r\n   */\r\n  stream: MediaStream;\r\n\r\n  /**\r\n   * RTCTrackEvent\r\n   * @description RTCTrackEvent\r\n   */\r\n  RTCTrackEvent?: RTCTrackEvent;\r\n\r\n  /**\r\n   * Logger\r\n   * @description Logger for track events\r\n   */\r\n  private logger: Logger = new Logger();\r\n\r\n\r\n  constructor(\r\n    constructorOptions: TracksEventsConstructorOptions,\r\n    participant: Participant\r\n  ) {\r\n\r\n\r\n    //Remote tracks events\r\n    if (constructorOptions.RTCTrackEvent) {\r\n      this.RTCTrackEvent = constructorOptions.RTCTrackEvent;\r\n\r\n      //detect event ended track\r\n      this.RTCTrackEvent.track.onended = (e) => {\r\n        this.logger.log(LoggerColors.YELLOW, { event: 'onended', e });\r\n      }\r\n      this.RTCTrackEvent.track.onmute = (e) => {\r\n        this.logger.log(LoggerColors.YELLOW, { event: 'onended', e });\r\n      }\r\n      this.RTCTrackEvent.track.onunmute = (e) => {\r\n        this.logger.log(LoggerColors.YELLOW, { event: 'onended', e });\r\n      }\r\n\r\n\r\n      //detect event ended track\r\n      for (const stream of this.RTCTrackEvent.streams) {\r\n        stream.onremovetrack = (e) => {\r\n          this.logger.log(LoggerColors.YELLOW, { event: 'onremovetrack', e });\r\n          this.handleTrackEnded(e);\r\n        }\r\n        for (const track of stream.getTracks()) {\r\n          track.onended = (e: Event) => {\r\n            this.logger.log(LoggerColors.YELLOW, { event: 'onended', e });\r\n            const trackEndedEvent = new MediaStreamTrackEvent('ended', { track });\r\n            this.handleTrackEnded(trackEndedEvent);\r\n          }\r\n          track.onmute = (e: Event) => {\r\n            this.logger.log(LoggerColors.YELLOW, { event: 'onmute', e });\r\n          }\r\n          track.onunmute = (e: Event) => {\r\n            this.logger.log(LoggerColors.YELLOW, { event: 'onunmute', e });\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.participant = participant;\r\n    this.stream = constructorOptions.MediaStream;\r\n\r\n\r\n    //on add track\r\n    this.stream.onaddtrack = (e: Event) => {\r\n      this.logger.log(LoggerColors.YELLOW, { event: 'onaddtrack', e });\r\n    };\r\n\r\n    //on remove track\r\n    this.stream.onremovetrack = (e) => {\r\n      this.logger.log(LoggerColors.YELLOW, { event: 'onremovetrack', e });\r\n      this.handleTrackEnded(e);\r\n    };\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Random id\r\n   * @returns generate random id\r\n   */\r\n  private randomId(): string {\r\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Handle track ended\r\n   * @param mediaStreamTrackEvent\r\n   */\r\n  private handleTrackEnded(mediaStreamTrackEvent: MediaStreamTrackEvent): void {\r\n    const trackRemoved = this.participant.tracks.find((track) => track.id === mediaStreamTrackEvent.track.id);\r\n    this.participant.tracks = this.participant.tracks.filter((track) => track.id !== mediaStreamTrackEvent.track.id);\r\n\r\n\r\n    //emit event\r\n    trackRemoved && this.participant.kitRtc.onRemoveRemoteMedia.next([this.participant, trackRemoved]);\r\n  }\r\n\r\n\r\n  /**\r\n   * Get source from track\r\n   * @param track is track for get source\r\n   * @returns\r\n   */\r\n  getSource(track: Track): HTMLVideoElement | HTMLAudioElement | undefined {\r\n    switch (track?.kind) {\r\n      case TrackKind.AUDIO:\r\n        const audio = document.createElement(\"audio\");\r\n        audio.srcObject = track.stream;\r\n        audio.autoplay = true;\r\n        audio.controls = true;\r\n        audio.muted = false;\r\n        return audio;\r\n      case TrackKind.VIDEO:\r\n        const video = document.createElement(\"video\");\r\n        video.srcObject = track.stream;\r\n        video.autoplay = true;\r\n        video.controls = true;\r\n        video.muted = false;\r\n        video.playsInline = true;\r\n        return video;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n\r\n  /**\r\n   * Remove all tracks events\r\n   * @description Remove all tracks events\r\n   */\r\n  removeAllTracksEvents(): void {\r\n    this.stream.onaddtrack = null;\r\n    this.stream.onremovetrack = null;\r\n    for (const stream of this.stream.getTracks()) {\r\n      stream.onended = null;\r\n      stream.onmute = null;\r\n      stream.onunmute = null;\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n","import { LoggerColors } from \"../interfaces/logger\";\r\nimport { Track, TrackKind } from \"../interfaces/tracks\";\r\nimport { KitRtc } from \"../services/kitrtc.service\";\r\nimport { LocalTracks } from \"./localtracks\";\r\nimport { Logger } from \"./logger\";\r\nimport { TracksEvents } from \"./tracks\";\r\n\r\n\r\n\r\n/**\r\n * Participant\r\n * @description Participant from room\r\n */\r\nexport class Participant {\r\n\r\n  /**\r\n   * Participant id\r\n   */\r\n  id: string;\r\n\r\n  /**\r\n   * Local participant\r\n   */\r\n  local: boolean = false;\r\n\r\n  /**\r\n   * Rtc peer connection\r\n   */\r\n  rtcPeerConnection?: RTCPeerConnection;\r\n\r\n\r\n  /**\r\n   * Local tracks\r\n   */\r\n  localTracks: LocalTracks = new LocalTracks(this.kitRtc, this);\r\n\r\n  /**\r\n   * Tracks\r\n   */\r\n  tracks: Track[] = [];\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Logger\r\n   * @description Logger\r\n   */\r\n  protected logger: Logger = new Logger();\r\n\r\n  /**\r\n   * Making offer\r\n   * @description Making offer\r\n   */\r\n  private makingOffer: boolean = false;\r\n\r\n\r\n  /**\r\n   * Participant constructor\r\n   * @param kitRtc\r\n   * @param id\r\n   * @param isLocal\r\n   * @param autoCreateOffer\r\n   */\r\n  constructor(\r\n    public kitRtc: KitRtc,\r\n    id: string,\r\n    private isLocal: boolean = true,\r\n    private autoCreateOffer: boolean = false\r\n  ) {\r\n\r\n\r\n    this.id = id;\r\n    this.local = isLocal;\r\n    //this.tracks = new Tracks(kitRtc, this);\r\n\r\n    //Setup webrtc\r\n    this.configWebRtc();\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Config webrtc\r\n   * @description Config webrtc\r\n   * @returns Promise<void>\r\n   * @private\r\n   */\r\n  protected async configWebRtc(): Promise<void> {\r\n\r\n    //ice servers\r\n    const iceServers: RTCIceServer[] = [\r\n      { urls: 'stun:stun.stunprotocol.org:3478' },\r\n      { urls: 'stun:stun.l.google.com:19302' },\r\n      { urls: 'stun:turn.nillapp.com:3478' },\r\n      {\r\n        urls: 'turn:turn.nillapp.com:3478?transport=udp',\r\n        credential: \"password\",\r\n        username: \"username\"\r\n      }\r\n    ]\r\n\r\n    //create rtcPeerConnection\r\n    this.rtcPeerConnection = new RTCPeerConnection({\r\n      iceServers: iceServers,\r\n      //iceTransportPolicy: 'all',\r\n    });\r\n\r\n\r\n    this.setBitRate();\r\n\r\n\r\n    //on ice candidate\r\n    this.rtcPeerConnection.onicecandidate = async (event: RTCPeerConnectionIceEvent) => {\r\n      this.kitRtc.isDebug && console.log('onicecandidate', event);\r\n      if (event.candidate) {\r\n        this.kitRtc.getSocket()?.emit('candidate', { ice: event.candidate, uuid: this.id });\r\n      }\r\n    };\r\n\r\n    //on track\r\n    this.rtcPeerConnection.ontrack = (event: RTCTrackEvent) => {\r\n      this.kitRtc.isDebug && console.log('p->ontrack', event);\r\n\r\n      //find stream in tracks\r\n      const mediaStream = this.createTrack(event.streams[0], event);\r\n      //const track = mediaStream.addTrack(event.track);\r\n\r\n      if (mediaStream) this.kitRtc.onRemoteMedia.next([this, mediaStream]);\r\n    };\r\n\r\n\r\n\r\n    //on connection state change\r\n    this.rtcPeerConnection.onconnectionstatechange = (event: Event) => {\r\n      this.kitRtc.isDebug && console.log('onconnectionstatechange', event);\r\n    };\r\n\r\n    //on ice connection state change\r\n    this.rtcPeerConnection.oniceconnectionstatechange = (event: Event) => {\r\n      this.kitRtc.isDebug && console.log('oniceconnectionstatechange', event);\r\n      if (this.rtcPeerConnection?.iceConnectionState === \"failed\") {\r\n        /* possibly reconfigure the connection in some way here */\r\n        /* then request ICE restart */\r\n        this.rtcPeerConnection.restartIce();\r\n      }\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n    //on ice gathering state change\r\n    this.rtcPeerConnection.onicegatheringstatechange = (event: Event) => {\r\n      this.kitRtc.isDebug && console.log('onicegatheringstatechange', event);\r\n    };\r\n\r\n    //on ice candidate error\r\n    this.rtcPeerConnection.onicecandidateerror = (e) => {\r\n      this.kitRtc.isDebug && this.logger.log(LoggerColors.RED, { event: 'onicecandidateerror', e });\r\n    };\r\n\r\n    //on signaling state change\r\n    this.rtcPeerConnection.onsignalingstatechange = (e: Event) => {\r\n      this.kitRtc.isDebug && console.log('onsignalingstatechange', e);\r\n      this.logger.log(LoggerColors.YELLOW, { event: 'onsignalingstatechange', e, signalingState: this.rtcPeerConnection?.signalingState });\r\n    };\r\n\r\n    //on data channel\r\n    this.rtcPeerConnection.ondatachannel = (event: RTCDataChannelEvent) => {\r\n      this.kitRtc.isDebug && console.log('ondatachannel', event);\r\n    };\r\n\r\n    this.rtcPeerConnection.onnegotiationneeded = (e: Event) => {\r\n      this.logger.log(LoggerColors.YELLOW, { event: 'onnegotiationneeded', e });\r\n      this.createOffer();\r\n    };\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Error handler\r\n   * @param error is error from webrtc\r\n   */\r\n  protected errorHandler(error: any) {\r\n    console.error(error);\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Created description\r\n   * @description Created description for other participant\r\n   * @param description as RTCSessionDescriptionInit\r\n   * @param type as string (offer|answer)\r\n   */\r\n  protected createdDescription(description: RTCSessionDescriptionInit, type: string) {\r\n    this.kitRtc.isDebug && console.log('got description');\r\n    this.rtcPeerConnection?.setLocalDescription(description).then(() => {\r\n      this.kitRtc.getSocket()?.emit(type, { sdp: this.rtcPeerConnection?.localDescription, uuid: this.id });\r\n      if(type === 'offer') this.makingOffer = false;\r\n    }).catch(this.errorHandler);\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Create offer\r\n   * @description Create offer for other participant\r\n   * @private\r\n   */\r\n  createOffer(): void {\r\n    //Cancel if we are already making an offer\r\n    if(this.makingOffer) return;\r\n    this.makingOffer = true;\r\n    this.kitRtc.isDebug && console.log(\"createOffer\", this.id);\r\n    this.rtcPeerConnection?.createOffer().then((description) => {\r\n      if (this.rtcPeerConnection?.signalingState != \"stable\") return;\r\n      this.createdDescription(description, 'offer');\r\n    }, this.errorHandler);\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle offer\r\n   * @description Handle offer from other participant\r\n   * @param offer offer from other participant\r\n   */\r\n  async handleOffer(offer: any): Promise<void> {\r\n    //Cancel if we are already making an offer\r\n    if(this.makingOffer) {\r\n      console.log(\"skip nested offer\", this.id);\r\n      return\r\n    };\r\n\r\n    //if we are answering a offer, we need to add tracks to peer connection\r\n    this.addTracksToPeerConnection();\r\n\r\n    await this.rtcPeerConnection?.setRemoteDescription(new RTCSessionDescription(offer.sdp)).then(() => {\r\n      if (offer.sdp.type !== 'offer') return;\r\n      this.kitRtc.isDebug && console.log(\"createAnswer\", { offer, id: this.id });\r\n      this.rtcPeerConnection?.createAnswer().then((description) => {\r\n        this.createdDescription(description, 'answer');\r\n      }).catch(this.errorHandler);\r\n    }, this.errorHandler);\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle answer\r\n   * @description Handle answer from other participant\r\n   * @param answer answer from other participant\r\n   */\r\n  handleAnswer(answer: any): void {\r\n    this.kitRtc.isDebug && console.log(\"handleAnswer\", answer, this.id);\r\n    this.rtcPeerConnection?.setRemoteDescription(new RTCSessionDescription(answer.sdp)).catch(this.errorHandler);\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle candidate\r\n   * @description Handle candidate from other participant\r\n   * @param event candidate from other participant\r\n   */\r\n  handleCandidate(event: any): void {\r\n    this.rtcPeerConnection?.addIceCandidate(new RTCIceCandidate(event.ice)).catch(this.errorHandler);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Create track\r\n   * @description Create track from stream and add to tracks\r\n   * @param stream stream of track\r\n   * @param rtcTrackEvent track event\r\n   * @param MediaStreamTrack track\r\n   * @returns Track | undefined\r\n   */\r\n  createTrack(stream: MediaStream, rtcTrackEvent?: RTCTrackEvent | MediaStreamTrack): Track | undefined {\r\n    if (!rtcTrackEvent) { return; }\r\n\r\n    if (rtcTrackEvent instanceof MediaStreamTrack) {\r\n      const track: Track = {\r\n        kind: rtcTrackEvent?.kind as TrackKind,\r\n        id: rtcTrackEvent?.id,\r\n        trackId: rtcTrackEvent?.id,\r\n        label: rtcTrackEvent?.label,\r\n        stream: stream,\r\n        track: rtcTrackEvent,\r\n        participantId: this.id,\r\n        getAutoSource: undefined,\r\n        trackEvents:  new TracksEvents({\r\n          MediaStream: stream,\r\n        }, this),\r\n        getSource: () => this.getSource(track)\r\n      }\r\n\r\n      //Events for tracks\r\n     ;\r\n\r\n      this.tracks.push(track);\r\n      return track;\r\n    }\r\n\r\n    const track: Track = {\r\n      kind: rtcTrackEvent?.track.kind as TrackKind,\r\n      id: rtcTrackEvent?.track.id,\r\n      trackId: rtcTrackEvent?.track.id,\r\n      label: rtcTrackEvent?.track.label,\r\n      stream: stream,\r\n      track: rtcTrackEvent?.track,\r\n      participantId: this.id,\r\n      getAutoSource: undefined,\r\n      trackEvents:  new TracksEvents({\r\n        MediaStream: stream,\r\n        RTCTrackEvent: rtcTrackEvent\r\n      }, this),\r\n      getSource: () => this.getSource(track)\r\n    }\r\n\r\n\r\n    this.tracks.push(track);\r\n    return track;\r\n  }\r\n\r\n\r\n  /**\r\n   * Set bitrate\r\n   * @description Set bitrate for video and audio\r\n   * @returns Promise<void>\r\n   */\r\n  protected async setBitRate(): Promise<void> {\r\n    const maxBitRateVideo = this.kitRtc.mediaOptions.video?.maxBitrate;\r\n\r\n    //set video bitrate\r\n    try {\r\n      if(maxBitRateVideo){\r\n        const videoTransceiver = this.rtcPeerConnection?.getTransceivers().find(transceiver => transceiver.sender.track?.kind === 'video');\r\n        if (videoTransceiver) {\r\n          //set bit rate\r\n          const parameters = videoTransceiver.sender.getParameters();\r\n          if (!parameters.encodings) {\r\n            parameters.encodings = [{}];\r\n          }\r\n          parameters.encodings[0].maxBitrate = maxBitRateVideo * 1000 || 1000000;\r\n          await videoTransceiver.sender.setParameters(parameters);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Set bitrate video error:', error);\r\n    }\r\n\r\n\r\n    //set audio bitrate\r\n    try {\r\n      const maxBitRateAudio = this.kitRtc.mediaOptions.audio?.maxBitrate;\r\n      if(maxBitRateAudio){\r\n        const audioTransceiver = this.rtcPeerConnection?.getTransceivers().find(transceiver => transceiver.sender.track?.kind === 'audio');\r\n        if (audioTransceiver) {\r\n          //set bit rate\r\n          const parameters = audioTransceiver.sender.getParameters();\r\n          if (!parameters.encodings) {\r\n            parameters.encodings = [{}];\r\n          }\r\n          parameters.encodings[0].maxBitrate = maxBitRateAudio * 1000 || 200000;\r\n          await audioTransceiver.sender.setParameters(parameters);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Set bitrate audio error:', error);\r\n    }\r\n\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Get source\r\n   * @description Get source from track\r\n   * @param track track\r\n   * @returns HTMLVideoElement | HTMLAudioElement | undefined\r\n   */\r\n  getSource(track: Track): HTMLVideoElement | HTMLAudioElement | undefined {\r\n    if (track.track.kind === 'video') {\r\n      const video = document.createElement('video');\r\n      video.srcObject = track.stream;\r\n      video.autoplay = true;\r\n      video.muted = true;\r\n      return video;\r\n    }\r\n    if (track.track.kind === 'audio') {\r\n      const audio = document.createElement('audio');\r\n      audio.srcObject = track.stream;\r\n      audio.autoplay = true;\r\n      audio.muted = true;\r\n      return audio;\r\n    }\r\n    return;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Start negotiation\r\n   * @description Start negotiation with other participant\r\n   */\r\n  negotiated(): void {\r\n    this.addTracksToPeerConnection();\r\n    this.createOffer();\r\n  }\r\n\r\n\r\n  /**\r\n   * Close peer connection\r\n   * @description Close peer connection\r\n   */\r\n  close(): void {\r\n    this.rtcPeerConnection?.close();\r\n\r\n    //remove tracks and events\r\n    this.rtcPeerConnection = undefined;\r\n  }\r\n\r\n  /**\r\n   * Add tracks to peer connection\r\n   * @description Add tracks to peer connection\r\n   */\r\n  private addTracksToPeerConnection(): void {\r\n    if (!this.rtcPeerConnection) {\r\n      this.configWebRtc();\r\n    }\r\n    const tracks = this.kitRtc.localParticipant?.localTracks.getTracks;\r\n    if (tracks) {\r\n      for (const track of tracks) {\r\n        const mediaTrack = track;\r\n        //find track in peer connection\r\n        const haveTrack = this.rtcPeerConnection?.getSenders().find(sender => sender.track?.id === mediaTrack.track.id);\r\n        if(!haveTrack){\r\n          if(this.kitRtc.isDebug) this.logger.log(LoggerColors.YELLOW, { event: 'Add local track to connection', track: mediaTrack.track });\r\n          this.rtcPeerConnection?.addTrack(mediaTrack.track, track.stream);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n","\r\n/**\r\n * Room codes interface\r\n * @description The room codes interface\r\n */\r\nexport enum RoomCodes {\r\n  /**\r\n   * @description The room was created successfully\r\n   */\r\n  SUCCESS = 'true',\r\n  /**\r\n   * @description The room was not created successfully\r\n   */\r\n  ERROR = 'false'\r\n}\r\n\r\n/**\r\n * Join room interface\r\n */\r\nexport interface JoinRoom {\r\n  /**\r\n   * Room code\r\n   * @description The room code\r\n   */\r\n  code: RoomCodes;\r\n\r\n  /**\r\n   * Room name\r\n   * @description The room name\r\n   */\r\n  room: string;\r\n\r\n  /**\r\n   * Message\r\n   * @description The message\r\n   */\r\n  message: string;\r\n}\r\n\r\n\r\n/**\r\n * Room events interface\r\n */\r\nexport enum RoomEvent {\r\n  /**\r\n   * @description The room was created successfully\r\n   */\r\n  TrackSubscribed = 'track-subscribed',\r\n  /**\r\n   * @description The room was not created successfully\r\n   */\r\n  TrackUnsubscribed = 'track-unsubscribed',\r\n  /**\r\n   * @description The participant was disconnected\r\n   */\r\n  ParticipantDisconnected = 'participant-disconnected',\r\n  /**\r\n   * @description The participant was connected\r\n   */\r\n  ParticipantConnected = 'participant-connected',\r\n  /**\r\n   * @description The participant was joined\r\n   */\r\n  ParticipantJoined = 'participant-joined',\r\n  /**\r\n   * @description The participant was left\r\n   */\r\n  ParticipantLeft = 'participant-left',\r\n}\r\n","import { BehaviorSubject } from \"rxjs\";\r\nimport { LoggerColors } from \"../interfaces/logger\";\r\nimport { JoinRoom, RoomCodes } from \"../interfaces/room\";\r\nimport { KitRtc } from \"../services/kitrtc.service\";\r\nimport { Logger } from \"./logger\";\r\n\r\n\r\n/**\r\n * Room for manage room in signaling server\r\n * @description Room class for manage room\r\n */\r\nexport class Room {\r\n\r\n\r\n  /**\r\n   * Is connected\r\n   * @description Is connected to room\r\n   */\r\n  private _isConnected: boolean = false;\r\n\r\n  /**\r\n   * Is connected (Observable)\r\n   * @description Is connected to room\r\n   */\r\n  isConnected: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\r\n\r\n\r\n\r\n  /**\r\n   * Logger\r\n   * @description Logger\r\n   */\r\n  protected logger: Logger = new Logger();\r\n\r\n  constructor(\r\n    private kitRtc: KitRtc,\r\n  ) {\r\n    this._isConnected = false;\r\n  }\r\n\r\n\r\n  /**\r\n   * Join room\r\n   * @param room room name for join, if not defined use room name from kitrtc or latest room name\r\n   * @returns {Promise<boolean>}\r\n   */\r\n  async join(room?: string): Promise<boolean> {\r\n    const socket = this.kitRtc.getSocket();\r\n    this.kitRtc.roomName = room || this.kitRtc.roomName;\r\n\r\n    if (!socket) {\r\n      this.logger.log(LoggerColors.RED, { event: \"join-room\", message: \"socket is not defined\" });\r\n      return false;\r\n    }\r\n\r\n    if (!this.kitRtc.roomName) {\r\n      this.logger.log(LoggerColors.RED, { event: \"join-room\", message: \"room is not defined\" });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      await this.leave(false)\r\n      return new Promise<boolean>((resolve, reject) => {\r\n        socket?.emit(\"join-room\", this.kitRtc.roomName, (response: JoinRoom) => {\r\n          if (response.code === RoomCodes.SUCCESS) {\r\n            this.logger.log(LoggerColors.GREEN, { event: \"join-room\", message: `joined to room (${this.kitRtc.roomName})` });\r\n            this._isConnected = true;\r\n            this.isConnected.next(true);\r\n            resolve(true);\r\n          } else {\r\n            this.logger.log(LoggerColors.RED, { event: \"join-room\", message: `error joining to room (${this.kitRtc.roomName})` });\r\n            this._isConnected = false;\r\n            this.isConnected.next(false);\r\n            reject(response);\r\n          }\r\n        });\r\n      });\r\n\r\n    } catch (error) {\r\n      this.logger.log(LoggerColors.RED, { event: \"join-room\", message: `error joining to room` });\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Leave room\r\n   * @description Leave room\r\n   * @returns {Promise<boolean>}\r\n   * @param clearConnections clear connections\r\n   */\r\n  async leave(clearConnections: boolean = true): Promise<boolean> {\r\n    if(!this.isConnected){\r\n      return false;\r\n    }\r\n\r\n    const socket = this.kitRtc.getSocket();\r\n\r\n    if (!socket) {\r\n      this.logger.log(LoggerColors.RED, { event: \"leave-room\", message: \"socket is not defined\" });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      return new Promise<boolean>((resolve, reject) => {\r\n        socket?.emit(\"leave-room\", async (response: JoinRoom) => {\r\n          if (response.code === RoomCodes.SUCCESS) {\r\n            this.logger.log(LoggerColors.GREEN, { event: \"leave-room\", message: `leaved to room` });\r\n\r\n            //clear connections\r\n            if(clearConnections) await this.clearConnections(true);\r\n\r\n            this._isConnected = false;\r\n            this.isConnected.next(false);\r\n            resolve(true);\r\n          } else {\r\n            this.logger.log(LoggerColors.RED, { event: \"leave-room\", message: `error leaved to room` });\r\n            reject(response);\r\n          }\r\n        });\r\n      });\r\n    } catch (error) {\r\n      this.logger.log(LoggerColors.RED, { event: \"leave-room\", message: `error leaved to room` });\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Clear connections\r\n   * @description Clear connections, participants and local tracks\r\n   * @param isLeaved is leaved to room\r\n   */\r\n  private async clearConnections(isLeaved: boolean): Promise<void> {\r\n    //clear participants\r\n    for (const participant of this.kitRtc.participants) {\r\n      participant.close();\r\n    }\r\n    this.kitRtc.participants = [];\r\n\r\n    if(isLeaved){\r\n      await this.kitRtc.localParticipant.localTracks.unpublish(true);\r\n      this.kitRtc.localParticipant.tracks = [];\r\n    }\r\n  }\r\n\r\n\r\n  get connected(): boolean {\r\n    return this._isConnected;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { Socket, io } from \"socket.io-client\";\nimport { Participant } from '../class/participant';\nimport { Room } from '../class/room';\nimport { Subject } from 'rxjs';\nimport { MediaOptions, Track } from '../interfaces/tracks';\nimport { Logger } from '../class/logger';\nimport { LoggerColors } from '../interfaces/logger';\n\n\n/**\n * KitRtc is the main service of the library.\n * It allows you to connect to a server and create a room.\n * @description This service is the main entry point for using the library. It provides methods for connecting to a server and creating rooms for real-time communication.\n */\n\n\n\n@Injectable({\n  providedIn: 'root'\n})\n\n\nexport class KitRtc {\n\n  //Connection\n  private server: string = \"http://localhost:3000\";\n  private socket?: Socket;\n\n\n  /**\n   * Debug mode\n   * @description Debug mode\n   * @default false\n   */\n  isDebug: boolean = false;\n\n  /**\n   * Logger\n   * @description Logger\n   */\n  protected logger: Logger = new Logger();\n\n\n  /**\n   * Participants\n   * @description List of participants\n   */\n  participants: Participant[];\n\n  /**\n   * Local participant\n   * @description Local participant\n   */\n  localParticipant: Participant;\n\n\n  /**\n   * Room name\n   * @description Room name for join\n   */\n  roomName: string;\n\n  /**\n   * Room instance\n   * @description Room instance for manage room\n   */\n  room: Room;\n\n  /**\n   * Reconnect\n   * @description Reconnect to room after disconnection\n   */\n  reconnect: boolean;\n\n  /**\n   * Is connected\n   * @description Is connected to server\n   */\n  isConnected: boolean ;\n\n\n  /**\n   * Media options\n   * @description Media options for local participant\n   */\n  mediaOptions: MediaOptions = {\n    video: {\n      maxBitrate: 2000\n    },\n    audio: {\n      maxBitrate: 200\n    }\n  }\n\n\n\n\n\n\n\n\n  /**\n   * @event onParticipantConnected\n   * @description Event emitted when a participant joins the room\n   * @param participant Participant connected\n   */\n  onParticipantConnected: Subject<Participant>;\n\n  /**\n   * @event onParticipantDisconnected\n   * @description Event emitted when a participant leaves the room\n   * @param participant Participant disconnected\n   */\n  onParticipantDisconnected: Subject<Participant>;\n\n  /**\n   * @event onRemoteMedia\n   * @description Event emitted when a remote media is added\n   * @param participant Participant added media\n   * @param track Track of event\n   */\n  onRemoteMedia: Subject<[Participant, Track]>;\n\n  /**\n   * @event onRemoveLocalMedia\n   * @description Event emitted when a local media is removed\n   * @param participant Participant local added media\n   * @param track Track removed of event\n   */\n  onRemoveLocalMedia: Subject<[Participant, Track]>;\n\n  /**\n   * @event onRemoveRemoteMedia\n   * @description Event emitted when a remote media is added\n   * @param participant Participant remote added media\n   * @param track Track remote of event\n   */\n  onRemoveRemoteMedia: Subject<[Participant, Track]>;\n\n\n  /**\n   * @event onDisconnect\n   * @description Event emitted when a socket is disconnected\n   * @param reason Reason of disconnection\n   */\n  onDisconnect: Subject<Socket.DisconnectReason>;\n\n\n  /**\n   * @event onMuted\n   * @description Event emitted when a participant is muted (Only for local participants for now.)\n   * @param participant Participant muted\n   * @param track Track muted\n   */\n  onMuted: Subject<[Participant, Track]>;\n\n\n  /**\n   * @event onUnMuted\n   * @description Event emitted when a participant is unmuted (Only for local participants for now.)\n   * @param participant Participant unmuted\n   * @param track Track unmuted\n   */\n  onUnMuted: Subject<[Participant, Track]>;\n\n\n\n\n\n\n  constructor(\n  ) {\n\n    /**\n     * Participants\n     */\n    this.participants = [];\n    this.localParticipant = new Participant(this, \"\", true);\n\n\n\n    /**\n     * Events\n     */\n    this.onDisconnect = new Subject<Socket.DisconnectReason>();\n    this.onParticipantConnected = new Subject<Participant>();\n    this.onParticipantDisconnected = new Subject<Participant>();\n    this.onRemoteMedia = new Subject<[Participant, Track]>();\n    this.onRemoveLocalMedia = new Subject<[Participant, Track]>();\n    this.onRemoveRemoteMedia = new Subject<[Participant, Track]>();\n    this.onMuted = new Subject<[Participant, Track]>();\n    this.onUnMuted = new Subject<[Participant, Track]>();\n\n\n\n\n    /**\n     * Room\n     */\n    this.roomName = \"\";\n    this.reconnect = true;\n    this.room = new Room(this);\n    this.isConnected = false;\n\n\n\n\n\n\n\n\n    /**\n     * Set default bitrate\n     */\n    if (this.mediaOptions) {\n      if (this.mediaOptions.video) {\n        this.mediaOptions.video.maxBitrate = this.mediaOptions.video?.maxBitrate || this.mediaOptions.video.maxBitrate;\n      }\n      if (this.mediaOptions.audio) {\n        this.mediaOptions.audio.maxBitrate = this.mediaOptions.audio?.maxBitrate || this.mediaOptions.audio.maxBitrate;\n      }\n    }\n\n  }\n\n\n  /**\n   * Connect with a server\n   * @description Connect with a server\n   * @param server Server url\n   * @returns Promise<boolean>\n   */\n  async connect(server: string): Promise<boolean> {\n    if (!server) {\n      this.logger.log(LoggerColors.RED, { event: \"connect\", message: \"server is not defined\"});\n      return false;\n    }\n\n    //connect to server with socket\n    this.server = server;\n    try {\n      this.socket = io(this.server, {\n        transports: [\"websocket\"],\n        path: \"/\",\n      });\n\n      this.localParticipant = new Participant(this, this.socket?.id || \"\", true);\n      this.handlingEventsServer()\n\n      return new Promise((resolve, reject) => {\n        this.socket?.once(\"connect\", () => {\n          resolve(true);\n        });\n        this.socket?.once(\"connect_error\", (error: Error) => {\n          this.logger.log(LoggerColors.RED, { event: \"connecterror\", message: error });\n          //clear socket once events\n          resolve(false);\n        });\n      });\n\n    } catch (error) {\n      if (this.isDebug) console.log(`MediaKitApp: error connecting to server (${error})`);\n      return false;\n    }\n\n  }\n\n\n\n\n\n\n\n  /**\n   * Handle events from server\n   * @description Handle events from server\n   */\n  private handlingEventsServer() {\n\n    this.socket?.on(\"connect\", () => {\n      this.logger.log(LoggerColors.GREEN, { event: \"connect\", message: \"connected to server\" });\n      this.isConnected = true;\n\n      /**\n       * Reconnect to room\n       */\n      if(this.roomName && this.reconnect){\n        this.logger.log(LoggerColors.BLUE, { event: \"reconnect\", message: \"reconnecting to room\" });\n        this.room.join(this.roomName).then((response) => {\n          if(response){\n            this.logger.log(LoggerColors.GREEN, { event: \"reconnect\", message: \"reconnected to room\" });\n          } else {\n            this.logger.log(LoggerColors.RED, { event: \"reconnect\", message: \"error reconnected to room\" });\n          }\n        }).catch((error) => {\n          this.logger.log(LoggerColors.RED, { event: \"reconnect\", message: error});\n        });\n      }\n\n    });\n\n\n    this.socket?.on(\"disconnect\", (event) => {\n      this.logger.log(LoggerColors.RED, { event: \"disconnect\", message: event });\n      this.onDisconnect.next(event);\n      this.isConnected = false;\n    });\n\n\n    this.socket?.on(\"participants\", async (response: any) => {\n      //create participants lists\n      this.participants = response.map((p: any) => {\n        const participant = new Participant(this, p, false, false);\n        //Emit event on joined participant\n        this.onParticipantConnected.next(participant);\n        //add track to connection\n        participant.negotiated();\n        return participant;\n      });\n    });\n\n    this.socket?.on(\"participant-join\", async (id: string) => {\n      if (this.participants.find((p) => p.id === id)) { return; }\n\n      //create participant\n      const participant = new Participant(this, id, false, true);\n      this.participants.push(participant);\n\n      //Emit event on joined participant\n      this.onParticipantConnected.next(participant);\n\n      //add track to connection (deprecated)\n      //participant.startNegotiation();\n    });\n\n    this.socket?.on(\"participant-left\", (id: string) => {\n      const participant = this.participants.find((p) => p.id === id);\n      if (participant) {\n        participant.close()\n        this.participants = this.participants.filter((p) => p.id !== id);\n        this.onParticipantDisconnected.next(participant);\n      }\n    });\n\n\n\n\n    /**\n     * WebRTC events\n     */\n    this.socket?.on(\"candidate\", (event: any, id: string) => {\n      const participant = this.participants.find((p) => p.id === event.id);\n      if (participant) {\n        participant.handleCandidate(event);\n      }\n    });\n\n    this.socket?.on(\"offer\", (offer: any) => {\n      const participant = this.participants.find((p) => p.id === offer.id);\n      if (participant) {\n        participant.handleOffer(offer);\n      }\n    });\n\n    this.socket?.on(\"answer\", (answer: any) => {\n      const participant = this.participants.find((p) => p.id === answer.id);\n      if (participant) {\n        participant.handleAnswer(answer);\n      }\n    });\n\n\n\n  }\n\n\n  /**\n   * Get socket instance\n   * @returns Socket\n   */\n  getSocket(): Socket | undefined {\n    return this.socket;\n  }\n\n\n\n  /**\n   * Auto play all tracks\n   * @description Manual auto play for all participants.\n   */\n  autoPlayPolicy(): void{\n    for (const participant of this.participants) {\n      for (const track of participant.tracks) {\n        if(track.trackComponent) track.trackComponent.autoPlay();\n      }\n    }\n  }\n}\n","import { Component, ElementRef, Input, ViewChild } from '@angular/core';\nimport { Track } from '../../interfaces/tracks';\nimport { Logger } from '../../class/logger';\nimport { LoggerColors } from '../../interfaces/logger';\nimport { IconType } from '../icon/icon.component';\nimport { KitRtc } from '../../services/kitrtc.service';\n\n@Component({\n  selector: 'kitrtc-track',\n  templateUrl: './tracks.component.html',\n  styleUrls: ['./tracks.component.css']\n})\nexport class TrackComponent {\n  @ViewChild('stream', { static: false }) stream?: ElementRef<HTMLVideoElement | HTMLAudioElement>;\n  @Input() track?: Track\n  @Input() local: boolean\n\n  logger: Logger = new Logger();\n  iconType = IconType;\n  autoPlayPolicySkip: boolean = true;\n\n\n  isLoaded: boolean = false;\n  onPlayed: boolean = false;\n\n  constructor(\n    private kitRtc: KitRtc,\n  ) {\n    this.local = true;\n  }\n\n  ngOnInit() {\n    if(this.track) this.track.trackComponent = this;\n  }\n\n\n\n  ngAfterViewInit() {\n    if (!this.stream) return;\n    if (this.local) {\n      this.stream.nativeElement.muted = true;\n    } else {\n      this.stream.nativeElement.muted = false;\n    }\n\n    this.stream.nativeElement.controls = false;\n    this.stream.nativeElement.autoplay = true;\n\n\n    if (this.stream.nativeElement instanceof HTMLVideoElement) {\n      this.stream.nativeElement.playsInline = true;\n    }\n\n    if (this.track) {\n      this.track.getAutoSource = this.stream.nativeElement;\n      this.stream.nativeElement.srcObject = this.track.stream;\n      this.autoPlay();\n    }\n  }\n\n\n\n\n  loadeddata(): void {\n    if (!this.stream) return;\n    this.isLoaded = true;\n  }\n\n  onPlaying(): void {\n    if (!this.stream) return;\n    this.onPlayed = true;\n  }\n\n\n\n  /**\n   * Auto play\n   * @description Auto play media element\n   * @returns {Promise<void>}\n   */\n  async autoPlay(): Promise<void> {\n    if (!this.stream) return;\n    const media = this.stream.nativeElement;\n    try {\n      if (this.local) {\n        media.muted = true;\n      } else {\n        media.muted = false;\n      }\n      media.play().then(() => {\n        this.autoPlayPolicySkip = true;\n      }, async (error: any) => {\n        if (error.code === 20) { return; }\n        if (error.code !== 0) this.logger.log(LoggerColors.RED, { event: 'auto-play', error });\n        this.autoPlayPolicySkip = false;\n        media.muted = true;\n        await media.play().then(() => {\n        }).catch((error) => {\n          if (error.code !== 0) this.logger.log(LoggerColors.RED, { event: 'auto-play', message: error.message });\n        });\n      });\n    } catch (error) {\n      this.logger.log(LoggerColors.RED, { event: 'auto-play', message: error });\n    }\n  }\n\n\n\n\n  /**\n   * Auto play for policy\n   */\n  autoPlayForPolicy(): void{\n    if(this.autoPlayPolicySkip) return;\n    this.autoPlay();\n    this.kitRtc.autoPlayPolicy();\n  }\n\n\n}\n","<video #stream *ngIf=\"track?.kind === 'video'\" (loadeddata)=\"loadeddata()\" (onplaying)=\"onPlaying()\"></video>\n<audio #stream *ngIf=\"track?.kind === 'audio'\" muted></audio>\n\n<!-- Icon for poster -->\n<kitrtc-icon [icon]=\"iconType.logo\" *ngIf=\"!isLoaded && !onPlayed && track?.kind === 'video'\"></kitrtc-icon>\n\n<!-- For autoplay policy -->\n<div class=\"dialog-silenced\" (click)=\"autoPlayForPolicy()\" *ngIf=\"!autoPlayPolicySkip\" [ngClass]=\"{\n    'track--video': track?.kind === 'video',\n  }\">\n  <div class=\"dialog-bg\">\n    <kitrtc-icon [icon]=\"iconType.logo\"></kitrtc-icon>\n  </div>\n  <button><kitrtc-icon [icon]=\"iconType.muted\"></kitrtc-icon></button>\n</div>\n","import { Component, ElementRef, Input, ViewChild } from '@angular/core';\nimport { Participant } from '../../../class/participant';\nimport { IconType } from '../../icon/icon.component';\nimport { Track, TrackKind } from '../../../interfaces/tracks';\n\n@Component({\n  selector: 'kitrtc-participant',\n  templateUrl: './participant.component.html',\n  styleUrls: ['./participant.component.scss']\n})\n\nexport class ParticipantComponent {\n  @ViewChild('participantElement', { static: false }) participantElement?: ElementRef<HTMLDivElement>;\n\n  @Input() participant?: Participant;\n  iconType = IconType;\n\n  constructor() { }\n\n  maximized(){\n    if (!this.participantElement?.nativeElement) return;\n\n    // Obtener el elemento nativo\n    const element = this.participantElement.nativeElement as HTMLDivElement & {\n      requestFullscreen?: () => Promise<void>;\n      webkitRequestFullscreen?: () => Promise<void>;\n      msRequestFullscreen?: () => Promise<void>;\n    };\n\n    //Verifica si el elemento está en pantalla completa\n    if (document.fullscreenElement) {\n      document.exitFullscreen();\n      return;\n    }\n\n    // Verificar si el método requestFullscreen es compatible\n    if (element.requestFullscreen) {\n      element.requestFullscreen();\n    } else if (element.webkitRequestFullscreen) { /* Safari */\n      element.webkitRequestFullscreen();\n    } else if (element.msRequestFullscreen) { /* IE11 */\n      element.msRequestFullscreen();\n    }\n  }\n\n\n  /**\n   * Have video participant\n   * @description Check if the participant have video\n   * @returns {boolean}\n   */\n  haveVideo(): boolean {\n    if (!this.participant) return false;\n    const find = this.participant.tracks.find(track => track.kind === TrackKind.VIDEO);\n    if (find) return true;\n    return false;\n  }\n\n\n  trackById(index: number, track: Track): string {\n    return track.id;\n  }\n}\n","<div class=\"participant\" #participantElement *ngIf=\"participant\">\n  <div class=\"participant__name\">{{ participant.id }}</div>\n  <div class=\"participant__media\">\n    <ng-container *ngFor=\"let track of participant.tracks, trackBy: trackById\">\n      <kitrtc-track [track]=\"track\" [local]=\"participant.local\"></kitrtc-track>\n    </ng-container >\n    <ng-container *ngIf=\"!haveVideo()\">\n      <div class=\"paticipant__media__icon\">\n        <kitrtc-icon [icon]=\"iconType.logo\"></kitrtc-icon>\n      </div>\n    </ng-container>\n  </div>\n  <div class=\"participant__controls\">\n    <button class=\"muted\" *ngIf=\"false\">\n      <kitrtc-icon [icon]=\"iconType.muted\"></kitrtc-icon>\n    </button>\n    <button class=\"maximized\">\n      <kitrtc-icon (click)=\"maximized()\" [icon]=\"iconType.maximized\"></kitrtc-icon>\n    </button>\n  </div>\n</div>\n","import { Component } from '@angular/core';\nimport { KitRtc } from '../../services/kitrtc.service';\nimport { IconType } from '../icon/icon.component';\nimport { Participant } from '../../class/participant';\nimport { TrackKind } from '../../interfaces/tracks';\n\n@Component({\n  selector: 'kitrtc-participants',\n  templateUrl: './participants.component.html',\n  styleUrls: ['./participants.component.scss']\n})\nexport class ParticipantsComponent {\n    _kitRtc: KitRtc;\n    iconType = IconType;\n\n    constructor(\n      public kitRtc: KitRtc,\n    ) {\n      this._kitRtc = kitRtc;\n    }\n\n\n    get participants(){\n      return this._kitRtc.participants;\n    }\n\n\n    isMuted(participant: Participant): boolean{\n      const getAudioTrack = participant.tracks.find(track => track.kind === TrackKind.AUDIO);\n      if(getAudioTrack){\n        return getAudioTrack.track.muted\n      }\n      return false;\n    }\n\n    trackById(index: number, item: Participant) {\n      return item.id\n    }\n\n}\n","<ng-container *ngIf=\"kitRtc.participants\">\n  <kitrtc-participant [participant]=\"participant\" *ngFor=\"let participant of kitRtc.participants, trackBy: trackById\" />\n</ng-container>\n\n","import { Component } from '@angular/core';\nimport { KitRtc } from '../../../services/kitrtc.service';\n\n@Component({\n  selector: 'kitrtc-local-participant',\n  templateUrl: './local-participant.component.html',\n  styleUrls: ['./local-participant.component.scss']\n})\n\nexport class LocalParticipantComponent {\n  _kitRtc: KitRtc;\n\n  constructor(\n    public kitRtc: KitRtc,\n  ) {\n    this._kitRtc = kitRtc;\n  }\n\n  get localParticipant(){\n    return this._kitRtc.localParticipant;\n  }\n}\n","<ng-container *ngIf=\"localParticipant\">\n    <kitrtc-participant [participant]=\"localParticipant\" />\n</ng-container>\n","import { Component, Renderer2 } from '@angular/core';\nimport { IconType } from '../icon/icon.component';\nimport { KitRtc } from '../../services/kitrtc.service';\nimport { TrackKind } from '../../interfaces/tracks';\n\n@Component({\n  selector: 'kitrtc-media-controls',\n  templateUrl: './media-controls.component.html',\n  styleUrls: ['./media-controls.component.scss']\n})\nexport class MediaControlsComponent {\n  iconType = IconType;\n\n  backgroundColor: boolean = true;\n\n  haveLocalVideo: boolean = false;\n  haveLocalAudio: boolean = false;\n\n  //Preving double click\n  requestCamera: boolean = false;\n  requestMic: boolean = false;\n  requestJoin: boolean = false;\n  requestLeave: boolean = false;\n\n  constructor(\n    private renderer: Renderer2,\n    private kitRtc: KitRtc\n  ) {\n    this.renderer.setStyle(document.body, 'background-color', '#121212');\n\n    //check if we have local video and audio\n    for (const localtracks of this.kitRtc.localParticipant.tracks) {\n      if (localtracks.kind === TrackKind.VIDEO) {\n        this.haveLocalVideo = true;\n      }\n      if (localtracks.kind === TrackKind.AUDIO) {\n        this.haveLocalAudio = true;\n      }\n    }\n\n\n\n  }\n\n  /**\n   * Destroy the component\n   */\n  ngOnDestroy(): void {\n    this.renderer.removeStyle(document.body, 'background-color');\n  }\n\n\n\n  /**\n   * Is connected in room\n   * @description Check if we are connected in room\n   * @returns {boolean}\n   */\n  get isConnected(): boolean {\n    return this.kitRtc.isConnected && this.kitRtc.room.connected;\n  }\n\n  get showJoinButton(): boolean {\n    return this.kitRtc.isConnected && !this.kitRtc.room.connected;\n  }\n\n\n\n  /**\n   * Toogle video\n   * @returns {boolean}\n   */\n  async toogleVideo(): Promise<void> {\n    if(this.requestCamera || !this.isConnected) return;\n    this.requestCamera = true;\n    await this.kitRtc.localParticipant.localTracks.toogleCamera();\n    this.requestCamera = false;\n  }\n\n\n  /**\n   * Toogle audio\n   * @returns {boolean}\n   */\n  async toogleAudio(): Promise<void> {\n    if(this.requestMic || !this.isConnected) return;\n    this.requestMic = true;\n    await this.kitRtc.localParticipant.localTracks.toogleMic();\n    this.requestMic = false;\n  }\n\n  /**\n   * Leave room\n   */\n  async leaveRoom(): Promise<void> {\n    if(!this.isConnected || this.requestLeave) return;\n    this.requestLeave = true;\n    await this.kitRtc.room.leave();\n    this.requestLeave = false;\n  }\n\n\n\n  /**\n   * Have video\n   * @description Check if we have video\n   * @returns {boolean}\n   */\n  haveVideo(): boolean {\n    const find = this.kitRtc.localParticipant.tracks.find((track) => track.kind === TrackKind.VIDEO);\n    if (find) {\n      if(find.track.enabled) return true;\n    }\n    return false;\n  }\n\n  /**\n   * Have audio\n   * @description Check if we have audio\n   * @returns {boolean}\n   */\n  haveAudio(): boolean {\n    const find = this.kitRtc.localParticipant.tracks.find((track) => track.kind === TrackKind.AUDIO);\n    if (find) {\n      if(find.track.enabled) return true;\n    }\n    return false;\n  }\n\n\n\n  async joinRoom(): Promise<void> {\n    if(this.requestJoin) return;\n    this.requestJoin = true;\n    await this.kitRtc.room.join();\n    this.requestJoin = false;\n  }\n}\n","<div class=\"kitrtc--container\">\n  <kitrtc-icon class=\"kitrtc--container--icon\" [icon]=\"iconType.logo\"></kitrtc-icon>\n  <div class=\"kitrtc--container--controls\">\n    <button *ngIf=\"!showJoinButton\" (click)=\"toogleVideo()\"\n      [ngClass]=\"{\n        'kitrtc--container--controls--disabled': this.requestCamera || !this.isConnected,\n        'kitrtc--container--controls--active': this.haveVideo()\n      }\">\n      <kitrtc-icon *ngIf=\"haveVideo()\" [icon]=\"iconType.CAMERA\" color=\"#cfcfcf\"></kitrtc-icon>\n      <kitrtc-icon *ngIf=\"!haveVideo()\" [icon]=\"iconType.CAMERA_OFF\" color=\"#cfcfcf\"></kitrtc-icon>\n    </button>\n    <button *ngIf=\"!showJoinButton\" (click)=\"toogleAudio()\"\n      [ngClass]=\"{\n        'kitrtc--container--controls--disabled': this.requestMic || !this.isConnected,\n        'kitrtc--container--controls--active': this.haveAudio()\n      }\">\n      <kitrtc-icon *ngIf=\"haveAudio()\" [icon]=\"iconType.MICROPHONE\" color=\"#cfcfcf\"></kitrtc-icon>\n      <kitrtc-icon *ngIf=\"!haveAudio()\" [icon]=\"iconType.MICROPHONE_OFF\" color=\"#cfcfcf\"></kitrtc-icon>\n    </button>\n    <button *ngIf=\"!showJoinButton\" (click)=\"leaveRoom()\"\n      [ngClass]=\"{\n        'kitrtc--container--controls--disabled': !this.isConnected\n      }\">\n      <kitrtc-icon [icon]=\"iconType.LOGOUT\" color=\"#cfcfcf\"></kitrtc-icon>\n    </button>\n    <button (click)=\"joinRoom()\" *ngIf=\"showJoinButton\" class=\"kitrtc--container--controls--connect\">Connect</button>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { ParticipantsComponent } from './components/participants/participants.component';\nimport { CommonModule } from '@angular/common';\nimport { IconComponent } from './components/icon/icon.component';\nimport { ParticipantComponent } from './components/participants/participant/participant.component';\nimport { LocalParticipantComponent } from './components/participants/local-participant/local-participant.component';\nimport { TrackComponent } from './components/tracks/tracks.component';\nimport { MediaControlsComponent } from './components/media-controls/media-controls.component';\n\n\n\n@NgModule({\n  declarations: [\n    ParticipantsComponent,\n    IconComponent,\n    ParticipantComponent,\n    LocalParticipantComponent,\n    TrackComponent,\n    MediaControlsComponent\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    ParticipantsComponent,\n    LocalParticipantComponent,\n    MediaControlsComponent\n  ]\n})\n\nexport class KitRtcModule { }\n","/*\n * Public API Surface of mediakitappjs\n */\n\n//Module\nexport * from './lib/kitrtc.module';\n\n//Services\nexport * from './lib/services/kitrtc.service';\n\n//Components\nexport * from './lib/components/participants/participants.component'\nexport * from './lib/components/participants/local-participant/local-participant.component'\nexport * from './lib/components/media-controls/media-controls.component'\n\n//Classes\nexport * from './lib/class/room';\nexport * from './lib/class/participant';\nexport * from './lib/class/tracks';\nexport * from './lib/class/logger';\nexport * from './lib/class/localtracks';\n\n//Interfaces\nexport * from './lib/interfaces/tracks';\nexport * from './lib/interfaces/room';\nexport * from './lib/interfaces/logger';\n\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1","i1.KitRtc","i3.IconComponent","i2.IconComponent","i3.TrackComponent","i3.ParticipantComponent"],"mappings":"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"}